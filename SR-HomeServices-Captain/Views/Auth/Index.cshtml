@model SR_HomeServices_Captain.ViewModels.AuthPageViewModel
@{
    ViewData["Title"] = "Authentication";
    Layout = "_AuthLayout";
}

<div class="container-fluid vh-100 d-flex justify-content-center align-items-center bg-light">
    <div class="row shadow-lg rounded-4 overflow-hidden" style="max-width: 900px; width:100%;">

        <!-- LEFT PANEL -->
        <div class="col-md-6 d-none d-md-flex flex-column justify-content-center align-items-center bg-primary text-white p-4">
            <h2 class="fw-bold mb-3">Welcome Back 👋</h2>
            <p class="text-center">
                Secure access to <strong>SR HomeServices</strong><br />
                Login or create a new account.
            </p>
            <i class="bi bi-shield-lock fs-1 mt-3"></i>
        </div>

        <!-- RIGHT PANEL -->
        <div class="col-md-6 bg-white p-4">

            <!-- LOGIN -->
            <form asp-action="Login" method="post" id="loginForm">
                @Html.AntiForgeryToken()
                <h4 class="mb-4 text-center">Login</h4>

                <div class="form-floating mb-3">
                    <input asp-for="Login.Email" name="Email" class="form-control" placeholder="Email">
                    <label>Email address</label>
                </div>

                <div class="form-floating mb-3 position-relative">
                    <input asp-for="Login.Password" name="Password" type="password" class="form-control" id="loginPassword" placeholder="Password">
                    <label>Password</label>
                    <i class="bi bi-eye-slash position-absolute top-50 end-0 translate-middle-y me-3 cursor-pointer"
                       onclick="togglePassword('loginPassword', this)"></i>
                </div>

                <button class="btn btn-primary w-100 py-2">
                    <i class="bi bi-box-arrow-in-right"></i> Login
                </button>

                <div class="text-center mt-3">
                    <a href="#" onclick="switchForm('forgotForm')">Forgot Password?</a> |
                    <a href="#" onclick="switchForm('registerForm')">Register</a>
                </div>
            </form>

            <!-- REGISTER -->
            <form asp-action="Register" method="post" id="registerForm" class="d-none">
                <h4 class="mb-4 text-center">Create Account</h4>

                <div class="form-floating mb-3">
                    <input asp-for="Register.Email" name="Email" class="form-control" placeholder="Email">
                    <label>Email</label>
                </div>

                <div class="form-floating mb-3">
                    <input asp-for="Register.Phone" name="Phone" class="form-control" placeholder="Phone">
                    <label>Phone</label>
                </div>

                <div class="form-floating mb-3">
                    <input asp-for="Register.Password" name="Password" type="password" class="form-control" placeholder="Password">
                    <label>Password</label>
                </div>

                <button class="btn btn-success w-100 py-2">
                    <i class="bi bi-person-plus"></i> Register
                </button>

                <div class="text-center mt-3">
                    <a href="#" onclick="switchForm('loginForm')">Already have an account?</a>
                </div>
            </form>

            <!-- FORGOT PASSWORD -->
            <form asp-action="ForgotPassword" method="post" id="forgotForm" class="d-none">
                <h4 class="mb-4 text-center">Reset Password</h4>

                <div class="form-floating mb-3">
                    <input asp-for="ForgotPassword.Email" name="Email" class="form-control" placeholder="Email">
                    <label>Email</label>
                </div>

                <button class="btn btn-warning w-100 py-2">
                    <i class="bi bi-envelope"></i> Send Reset Link
                </button>

                <div class="text-center mt-3">
                    <a href="#" onclick="switchForm('loginForm')">Back to Login</a>
                </div>
            </form>

        </div>
    </div>
</div>

<script>
    function switchForm(formId) {
        ['loginForm', 'registerForm', 'forgotForm'].forEach(f => {
            document.getElementById(f).classList.add('d-none');
        });
        document.getElementById(formId).classList.remove('d-none');
    }

    function togglePassword(inputId, icon) {
        const input = document.getElementById(inputId);
        if (input.type === "password") {
            input.type = "text";
            icon.classList.replace('bi-eye-slash', 'bi-eye');
        } else {
            input.type = "password";
            icon.classList.replace('bi-eye', 'bi-eye-slash');
        }
    }
</script>
